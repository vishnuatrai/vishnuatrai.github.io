
<!DOCTYPE HTML>
<html>
<head>
	<meta charset="utf-8">
	<title>@vishnuatrai</title>
	<meta name="author" content="vishnuatrai.com">

	
	<meta name="description" content="Rails 3 – ActiveModel Basics Hey Guys, It is long time to write something, since I was busy with some open-source stuff. Over last two weeks we were &hellip;">
	

  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">

	<link href="/atom.xml" rel="alternate" title="@vishnuatrai" type="application/atom+xml">
	
	<link rel="canonical" href="http://vatrai.github.io/blog/page/3/">
	<link href="/favicon.png" rel="shortcut icon">
	<link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
	<!--[if lt IE 9]><script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script><![endif]-->
	<script src="//ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
	<link href='http://fonts.googleapis.com/css?family=Open+Sans:400italic,400,700' rel='stylesheet' type='text/css'>
	<!--Fonts from Google"s Web font directory at http://google.com/webfonts -->
<link href="//fonts.googleapis.com/css?family=PT+Serif:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">
<link href="//fonts.googleapis.com/css?family=PT+Sans:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">

</head>


<body>
	<div class="container">
		<div class="left-col">
			<div class="intrude-less">
			<header id="header" class="inner"><nav id="main-nav"><ul class="main-navigation">
  <li><a href="/">Blog</a></li>
  <li><a href="/about">About</a></li>
  <li><a href="/blog/archives">Archives</a></li>
</ul>
</nav>
<!-- <nav id="sub-nav">
	<div class="social">
		
		
		<a class="google" href="https://plus.google.com/102433220410072726105" rel="author" title="Google+">Google+</a>
		
		
		<a class="twitter" href="http://twitter.com/vishnuatrai" title="Twitter">Twitter</a>
		
		
		<a class="github" href="https://github.com/vatrai" title="GitHub">GitHub</a>
		
		
		
		
		
		
		
		<a class="rss" href="/atom.xml" title="RSS">RSS</a>
		
	</div>
</nav> -->
<div class="profile-container">
  <div class="profilepic">
    <script src="/javascripts/md5.js"></script>
    <script type="text/javascript">
$(function(){
  $('.profilepic').append("<img src='http://www.gravatar.com/avatar/" + MD5("me@vishnuatrai.com") + "?s=160' alt='Profile Picture' style='width: 160px;' />");
});
    </script>
  </div>
  <hgroup>
  <h1 class="site-title"><a href="/">@vishnuatrai</a></h1>
  
  <p class="site-subtitle">Ruby on Rails contributor developer</p>
  
  </hgroup>
  
<hgroup>
  <nav id="sub-nav">
    <div class="social" style="margin-bottom:60px; margin-right:0px;">
        
      
        <a class="google" href="https://plus.google.com/102433220410072726105" rel="author" title="Google+">Google</a>
        

      
        <a class="twitter" href="http://twitter.com/vishnuatrai" title="Twitter">Twitter</a>
      
      
        <a class="github" href="https://github.com/vatrai" title="GitHub">GitHub</a>
      
      
      
      
      
      
      
        <a class="rss" href="/atom.xml" title="RSS" target='_blank'>RSS</a>
      
    </div>  
  </nav>
</hgroup>

<hgroup>
 <p class="site-subtitle" style="font-size:10px;">
  Copyright &copy; 2014 - vishnuatrai.com 
  <br />
  <span class="credit">Powered by <a href="http://octopress.org">Octopress</a></span>
 </p>
 </hgroup>


</div>
</header>
			</div>
		</div>
		<div class="mid-col">
			
				
			
			<div class="mid-col-container">
				<div id="content" class="article-inner">
<div itemscope itemtype="http://schema.org/Blog">


    <article class="post" itemprop="blogPost" itemscope itemtype="http://schema.org/BlogPosting">
	<h1 class="title" itemprop="name"><a href="/blog/2011/03/17/rails-3-e28093-activemodel/" itemprop="url">Rails 3 – ActiveModel Basics</a></h1>
	<div class="entry-content" itemprop="articleBody">
		<p>Hey Guys,</p>

<p>It is long time to write something, since I was busy with some open-source stuff. Over last two weeks we were migrating an application from rails 2.x version to rails 3.x. In that application we had lot of ActiveResource classes and other classes, and in those classes we need to validate some attributes and also we need to wrap call backs around some methods in ActiveRecord style. In earlier 2.x rails version we had to write some code for validation and  call back that was written us.</p>

<p>During the migration from 2.x version to rails 3, we got to know about ActiveModel module that will give you lot of features in ActiveRecord style.</p>

<p>Here, I am sharing my experiences with ActiveModel &ndash;</p>

<p>ActiveModel is a nice library provided by Rails 3, by using that any ruby object can behave like a ActiveRecord class object. Some of ActiveModel API explained below &ndash;</p>

<h4>1.1 AttributeMethods</h4>

<p>AttributeMethods module can add custom prefixes and suffixes on  methods of a class. It is used by defining the prefixes and suffixes,  which methods on the object will use them.</p>

<pre><code>class Person
  include ActiveModel::AttributeMethods

  attribute_method_prefix 'reset_'
  attribute_method_suffix '_highest?'
  define_attribute_methods ['age']

  attr_accessor :age

private
  def reset_attribute(attribute)
    send("#{attribute}=", 0)
  end

  def attribute_highest?(attribute)
    send(attribute) &gt; 100 ? true : false
  end

end

person = Person.new
person.age = 110
person.age_highest?  # true
person.reset_age     # 0
person.age_highest?  # false
</code></pre>

<h4>1.2 Callbacks</h4>

<p>Callbacks gives Active Record style callbacks. This provides the  ability to define the callbacks and those will run at appropriate time.  After defining a callbacks you can wrap with before, after and around  custom methods.</p>

<pre><code>class Person
  extend ActiveModel::Callbacks

  define_model_callbacks :update

  before_update :reset_me

  def update
    _run_update_callbacks do
      # This will call when we are trying to call update on object.
    end
  end

  def reset_me
    # This method will call when you are calling update on object as a before_update callback as defined.
  end
end
</code></pre>

<h4>1.3 Conversion</h4>

<p>If a class defines persisted? and id methods then you can include  Conversion module in that class and you can able to call Rails  conversion methods to objects of that class.</p>

<pre><code>class Person
  include ActiveModel::Conversion

  def persisted?
    false
  end

  def id
    nil
  end
end

person = Person.new
person.to_model == person  #=&gt; true
person.to_key              #=&gt; nil
person.to_param            #=&gt; nil
</code></pre>

<h4>1.4 Dirty</h4>

<p>An object becomes dirty when an object is gone through one or more  changes to its attributes and not yet saved. This gives the ability to  check whether an object has been changed or not. It also has attribute  based accessor methods. Lets consider a Person class with attributes  first_name and last_name</p>

<pre><code>require 'rubygems'
require 'active_model'

class Person
  include ActiveModel::Dirty
  define_attribute_methods [:first_name, :last_name]

  def first_name
    @first_name
  end

  def first_name=(value)
    first_name_will_change!
    @first_name = value
  end

  def last_name
    @last_name
  end

  def last_name=(value)
    last_name_will_change!
    @last_name = value
  end

  def save
    @previously_changed = changes
  end

end
</code></pre>

<h5>1.4.1 Querying object directly for its list of all changed attributes.</h5>

<pre><code>person = Person.new
person.first_name = "First Name"

person.first_name #=&gt; "First Name"
person.first_name = "First Name Changed"

person.changed? #=&gt; true

#returns an list of fields arry which all has been changed before saved.
person.changed #=&gt; ["first_name"]

#returns a hash of the fields that have changed with their original values.
person.changed_attributes #=&gt; {"first_name" =&gt; "First Name Changed"}

#returns a hash of changes, with the attribute names as the keys, and the values will be an array of the old and new value for that field.
person.changes #=&gt; {"first_name" =&gt; ["First Name","First Name Changed"]}
</code></pre>

<h5>1.4.2 Attribute based accessor methods</h5>

<p>Track whether the particular attribute has been changed or not.</p>

<pre><code>#attr_name_changed?
person.first_name #=&gt; "First Name"

#assign some other value to first_name attribute
person.first_name = "First Name 1"

person.first_name_changed? #=&gt; true
</code></pre>

<p>Track what was the previous value of the attribute.</p>

<pre><code>#attr_name_was accessor
person.first_name_was  #=&gt; "First Name"
</code></pre>

<h5>Track  both previous and current value of the changed attribute. Returns an array if changed else returns nil</h5>

<pre><code>#attr_name_change
person.first_name_change #=&gt; ["First Name", "First Name 1"]
person.last_name_change #=&gt; nil
</code></pre>

<h4>1.5 Validations</h4>

<p>Validations module adds the ability to class objects to validate them in Active Record style.</p>

<pre><code>class Person
  include ActiveModel::Validations

  attr_accessor :name, :email

  validates :name, :presence =&gt; true
  validates_format_of :email, :with =&gt; /^([^\s]+)((?:[-a-z0-9]\.)[a-z]{2,})$/i 

end

person = Person.new
person.valid?                        #=&gt; false
person.name  = 'vishnu'
person.email  = 'me'
person.valid?                        #=&gt; false
person.email = 'me@vishnuatrai.com'
person.valid?                        #=&gt; true
</code></pre>

		
		
	</div>

</article>


    <article class="post" itemprop="blogPost" itemscope itemtype="http://schema.org/BlogPosting">
	<h1 class="title" itemprop="name"><a href="/blog/2011/02/16/mapreduce-tool-to-reduce-analytical-data-processing/" itemprop="url">MapReduce: Reduce Analytical Data Processing</a></h1>
	<div class="entry-content" itemprop="articleBody">
		<p>Today every human being is rapidly increasing online activities and as a result web applications are having a huge amounts of data, now it is a challenge for organizations to quickly analyze the huge amounts of data their customers and audiences generate to better understand and serve them.MapReduce is the tool that is helping those organizations.</p>

<p>MapReduce is a programming framework popularized by Google and used to simplify data processing across massive data sets.</p>

<p>Enterprise implementation of MapReduce can be found in Hadoop, which uses HDFS to store unstructured data (file system) and uses the power of MapReduce to parallelize the processing of this data. Hadoop is suited for non time-sensitive batch jobs involving large-scale datasets.</p>

<p>With MapReduce, computational processing can occur on data stored either in a filesystem (unstructured) or within a database (structured).</p>

<p>There are two fundamental pieces of a MapReduce query:</p>

<h4>Map</h4>

<p>The master node takes the input, chops it up into smaller sub-problems, and distributes those to worker nodes. A worker node may do this again in turn, leading to a multi-level tree structure. The worker node processes that smaller problem, and passes the answer back to its master node.</p>

<h4>Reduce</h4>

<p>The master node then takes the answers to all the sub-problems and combines them in a way to get the output &ndash; the answer to the problem it was originally trying to solve.</p>

<h3>Benefits of MapReduce</h3>

<p>First, the model is easy to use, even for programmers without experience with distributed systems, since it hides the details of parallelization, fault-tolerance, locality optimization, and load balancing. MapReduce allows developers to write applications in their language of choice while handling the details of parallelization behind the scenes.</p>

<p>Second, a large variety of problems are easily expressible as MapReduce computations.
For example, MapReduce is used for the generation of data for Google&rsquo;s production web search service, for sorting, for data mining, for machine learning, and many other systems.</p>

<p>Third, MapReduce enables scaling of applications across large clusters of machines comprising thousands of nodes, with fault-tolerance built-in for ultra-fast performance.</p>

		
		
	</div>

</article>

</div>
<nav id="pagenavi">
    
        <a href="/blog/page/2/" class="prev">Prev</a>
    
    
        <a href="/blog/page/4/" class="next">Next</a>
    
    <div class="center"><a href="/blog/archives">Blog Archives</a></div>
</nav>
</div>
			</div>
			<footer id="footer" class="inner">
</footer>
			<script src="/javascripts/slash.js"></script>
<script src="/javascripts/jquery.fancybox.pack.js"></script>
<script type="text/javascript">
(function($){
	$('.fancybox').fancybox();
})(jQuery);
</script> <!-- Delete or comment this line to disable Fancybox -->


<script type="text/javascript">
      var disqus_shortname = 'vishnuatrai';
      
        
        var disqus_script = 'count.js';
      
    (function () {
      var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
      dsq.src = 'http://' + disqus_shortname + '.disqus.com/' + disqus_script;
      (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    }());
</script>






		</div>
	</div>
</body>
</html>
