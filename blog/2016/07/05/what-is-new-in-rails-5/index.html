

<!DOCTYPE HTML>
<html>
<head>
	<meta charset="utf-8">
	<title>What is new in Rails 5 - @vishnuatrai</title>
	<meta name="author" content="vishnuatrai.in">

	
	<meta name="description" content="What is new in Rails 5">
	<meta name="keywords" content="Rails 5, Rails, RoR, Ruby on Rails">

  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">

	<link href="false" rel="alternate" title="@vishnuatrai" type="application/atom+xml">
	
	<link rel="canonical" href="http://vishnuatrai.in/blog/2016/07/05/what-is-new-in-rails-5/">
  <link href="/favicon.gif" rel="shortcut icon" type="image/x-icon" >
  <link rel="icon" href="/favicon.gif" type="image/x-icon">

	<link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
	<link href="/stylesheets/custom.css" media="screen, projection" rel="stylesheet" type="text/css">

	<!--[if lt IE 9]><script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script><![endif]-->
	<script src="//ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
	<link href='http://fonts.googleapis.com/css?family=Open+Sans:400italic,400,700' rel='stylesheet' type='text/css'>
	<!--Fonts from Google"s Web font directory at http://google.com/webfonts -->
<link href="//fonts.googleapis.com/css?family=PT+Serif:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">
<link href="//fonts.googleapis.com/css?family=PT+Sans:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">

</head>


<body>
	<div class="container">
		<div class="left-col">
			<div class="intrude-less">
			<header id="header" class="inner"><nav id="main-nav"><ul class="main-navigation">
  <li><a href="/">Blog</a></li>
  <li><a href="/about">About</a></li>
  <li><a onclick="javascript:void(0);" id="search-blog-lnk" style='cursor:move;'>Search</a></li>
  <li><a href="/blog/archives">Archives</a></li>
</ul>
</nav>
<div class="profile-container">
  <div class="profilepic">
    <script src="/javascripts/md5.js"></script>
    <script type="text/javascript">
$(function(){
  $('.profilepic').append("<img src='http://www.gravatar.com/avatar/" + MD5("vishnu.atrai@gmail.com") + "?s=160' alt='Profile Picture' style='width: 160px;' />");
});
    </script>
  </div>
  <hgroup>
  <h1 class="site-title"><a href="/">@vishnuatrai</a></h1>
  
  <p class="site-subtitle">Java, Spring Boot Developer, Ruby on Rails Contributor</p>
  
  </hgroup>
  
<hgroup>
  <nav id="sub-nav">
    <div class="social" style="margin-bottom:60px; margin-right:0px;">
        
        

      
        <a class="twitter" href="http://twitter.com/vishnuatrai" title="Twitter">Twitter</a>
      
      
        <a class="github" href="https://github.com/vishnuatrai" title="GitHub">GitHub</a>
      
      
      
        <a class="linkedin" href="http://www.linkedin.com/in/vishnuatrai">LinkedIn</a>
      
      
      
      
      
        <a class="stackoverflow" href="https://stackoverflow.com/users/585675" title="StackOverflow" target='_blank'>StackOverflow</a>
      
      

    </div>  
  </nav>
</hgroup>

<hgroup>
 <p class="site-subtitle" style="font-size:10px;">
  Copyright &copy; 2020 - vishnuatrai.in 
  <br />
  <span class="credit">Powered by <a href="http://octopress.org">Octopress</a></span>
 </p>
 </hgroup>


</div>
</header>
			</div>
		</div>
		<div class="mid-col">
			
				
			
      <div class="mid-col-container">
        <div id="bloag-search" style="display:none;">
          <gcse:search></gcse:search>
        </div>
				<div id="content" class="article-inner"><article class="post" itemscope itemtype="http://schema.org/BlogPosting">
  
	<h1 class="title" itemprop="name">What Is New in Rails 5</h1>
  








  



  <div class="post-date"><time datetime="2016-07-05T17:34:19+05:30" data-updated="true" itemprop="datePublished">Jul 5<span>th</span>, 2016</time></div>
	<div class="entry-content" itemprop="articleBody"><h3>ApplicationRecord</h3>

<p>Similar to <code>ApplicationController</code> which is the common base class for all controllers that you get with new Rails apps, <code>ApplicationRecord</code> will provide a base class for your ActiveRecord models. This provides a common place to put any base model concerns.
<code>app/models/application_record.rb</code> file will be automatically added to models in Rails 5 applications.</p>

<pre><code># app/models/application_record.rb
class ApplicationRecord &lt; ActiveRecord::Base
    self.abstract_class = true
end
</code></pre>

<h3>ActionCable</h3>

<p>Action Cable can integrates websocket with rails application. Action Cable server can handle multiple connection instances. It has only one instance per websocket connection. The client websocker connection(consumer) can subscribe to multiple cable channels.<!--more-->For example Action Cable server can have a <code>ChatChannel</code> and an <code>AppearancesChannel</code> and a consumer(websocket) can subscribe to either one or both of channels.</p>

<pre><code>#Publisher Streams
# app/channels/chat_channel.rb
class ChatChannel &lt; ApplicationCable::Channel
    def subscribed
        stream_from "chat_#{params[:room]}"
    end
end

#Subscriber
// app/javascript/channels/chat_channel.js
import consumer from "./consumer"
consumer.subscriptions.create({ channel: "ChatChannel", room: "Best Room" })
</code></pre>

<h3>ActiveRecord::Attributes</h3>

<p>Define an <code>attribute</code> on a model with type. It is not essential to have a database column with the custom model <code>attribute</code>. <code>attribute</code> can also be used to provide default values.</p>

<pre><code># db/schema.rb
create_table :profiles, force: true do |t|
    t.decimal :gpa
    t.string :name, default: "Full Name"
end

# app/models/profile.rb
class Profile &lt; ActiveRecord::Base
end

profile = Profile.new(gpa: '4.1')

# before
profile.gpa # =&gt; BigDecimal.new(4.1)
profile.new.name # =&gt; "Full Name"

class Profile &lt; ActiveRecord::Base
    attribute :gpa, :integer # custom type
    attribute :name, :string, default: "Your Name" # default value
    attribute :current_time, :datetime, default: -&gt; { Time.now } # default value
    attribute :field_without_db_column, :integer, array: true
end

# after
profile.gpa # =&gt; 10
Profile.new.name # =&gt; "Your Name"
Profile.new.current_time # =&gt; 2015-05-30 11:04:48 -0600
model = Profile.new(field_without_db_column: ["1", "2", "3"])
model.attributes # =&gt; {field_without_db_column: [1, 2, 3]}
</code></pre>

<h3>Rails API &ndash; ActionController::API</h3>

<p>To avoid middlewares used for browser based web applications and server public facing json APIs, we can create API only rails application here after 5.0. <code>rails new my_api --api</code> can be used to generate application which will be API only and will not generate assets and views.</p>

<pre><code># app/controllers/application_controller.rb
class ApplicationController &lt; ActionController::API
end
</code></pre>

<h3>Ruby 2.2.2+ required version from Rails 5.0</h3>

<p>Ruby 2.2.2+ required version from Rails 5.0</p>

<br />


<br />


<h3>References</h3>

<p><a href="https://guides.rubyonrails.org/5_0_release_notes.html">https://guides.rubyonrails.org/5_0_release_notes.html</a></p>
</div>

</article>

	<div class="share">
    <div class="share_icon_group addthis_toolbox addthis_default_style addthis_32x32_style">
        
            <a class="share_icon addthis_button_preferred_1"></a>
        
        
            <a class="share_icon addthis_button_preferred_2" fb:like:layout="button_count"></a>
        
        
        <a class="share_icon addthis_button_preferred_4"></a>
    </div>
    <script type="text/javascript" src="http://s7.addthis.com/js/300/addthis_widget.js#pubid="></script>
</div>



<section id="comment">
    <div id="disqus_thread" aria-live="polite"><noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
</div>
</section>
</div>
			</div>
			<footer id="footer" class="inner">
</footer>
			<script src="/javascripts/slash.js"></script>
<script src="/javascripts/jquery.fancybox.pack.js"></script>
<script type="text/javascript">
(function($){
	$('.fancybox').fancybox();
})(jQuery);
</script> <!-- Delete or comment this line to disable Fancybox -->


<script type="text/javascript">
      var disqus_shortname = 'cutthecuttingedge';
      
        

        // var disqus_developer = 1;
        var disqus_identifier = 'http://vishnuatrai.in/blog/2016/07/05/what-is-new-in-rails-5/';

        var disqus_url = 'http://vishnuatrai.in/blog/2016/07/05/what-is-new-in-rails-5/';
        var disqus_script = 'embed.js';
      
    (function () {
      var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
      dsq.src = 'http://' + disqus_shortname + '.disqus.com/' + disqus_script;
      (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    }());
</script>



	<script type="text/javascript">
		var _gaq = _gaq || [];
		_gaq.push(['_setAccount', 'UA-18733388-1']);
		_gaq.push(['_trackPageview']);

		(function() {
			var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
			ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
			var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
      })();

    
    (function() {
      var cx = '003479435450341944083:wkvxmvwzl1m';
      var gcse = document.createElement('script');
      gcse.type = 'text/javascript';
      gcse.async = true;
      gcse.src = (document.location.protocol == 'https:' ? 'https:' : 'http:') +
        '//www.google.com/cse/cse.js?cx=' + cx;
      var s = document.getElementsByTagName('script')[0];
        s.parentNode.insertBefore(gcse, s);
    })();
    $(document).ready(function(){
      $('#search-blog-lnk').click(function(e){ 
         $('#bloag-search').toggle(); 
         $('#bloag-search').css( {'top':e.pageY-50,'left': (e.pageX), 'position':'absolute', 'border':'1px solid black', 'padding':'0px'} );
      });

      $('#bloag-search').css('z-index','10000');
      $('#content').click(function(){  $('#bloag-search').hide();  });
      $("#bloag-search").on('click', '.gsc-clear-button', 
        function(){ $('#bloag-search').hide();
      });

    });
  </script>




		</div>
	</div>
</body>
</html>
