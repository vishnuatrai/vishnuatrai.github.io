

<!DOCTYPE HTML>
<html>
<head>
	<meta charset="utf-8">
	<title>Kubernetes - Secrets vs ConfigMaps - @vishnuatrai</title>
	<meta name="author" content="vishnuatrai.in">

	
	<meta name="description" content="Kubernetes - Secrets vs ConfigMaps">
	<meta name="keywords" content="Kubernetes, Secrets, ConfigMaps">

  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">

	<link href="false" rel="alternate" title="@vishnuatrai" type="application/atom+xml">
	
	<link rel="canonical" href="http://vishnuatrai.in/blog/2018/08/16/kubernetes-secrets-vs-configmaps/">
  <link href="/favicon.gif" rel="shortcut icon" type="image/x-icon" >
  <link rel="icon" href="/favicon.gif" type="image/x-icon">

	<link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
	<link href="/stylesheets/custom.css" media="screen, projection" rel="stylesheet" type="text/css">

	<!--[if lt IE 9]><script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script><![endif]-->
	<script src="//ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
	<link href='http://fonts.googleapis.com/css?family=Open+Sans:400italic,400,700' rel='stylesheet' type='text/css'>
	<!--Fonts from Google"s Web font directory at http://google.com/webfonts -->
<link href="//fonts.googleapis.com/css?family=PT+Serif:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">
<link href="//fonts.googleapis.com/css?family=PT+Sans:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">

</head>


<body>
	<div class="container">
		<div class="left-col">
			<div class="intrude-less">
			<header id="header" class="inner"><nav id="main-nav"><ul class="main-navigation">
  <li><a href="/">Blog</a></li>
  <li><a href="/about">About</a></li>
  <li><a onclick="javascript:void(0);" id="search-blog-lnk" style='cursor:move;'>Search</a></li>
  <li><a href="/blog/archives">Archives</a></li>
</ul>
</nav>
<div class="profile-container">
  <div class="profilepic">
    <script src="/javascripts/md5.js"></script>
    <script type="text/javascript">
$(function(){
  $('.profilepic').append("<img src='http://www.gravatar.com/avatar/" + MD5("vishnu.atrai@gmail.com") + "?s=160' alt='Profile Picture' style='width: 160px;' />");
});
    </script>
  </div>
  <hgroup>
  <h1 class="site-title"><a href="/">@vishnuatrai</a></h1>
  
  <p class="site-subtitle">Java, Spring Boot Developer, Ruby on Rails Contributor</p>
  
  </hgroup>
  
<hgroup>
  <nav id="sub-nav">
    <div class="social" style="margin-bottom:60px; margin-right:0px;">
        
        

      
        <a class="twitter" href="http://twitter.com/vishnuatrai" title="Twitter">Twitter</a>
      
      
        <a class="github" href="https://github.com/vishnuatrai" title="GitHub">GitHub</a>
      
      
      
        <a class="linkedin" href="http://www.linkedin.com/in/vishnuatrai">LinkedIn</a>
      
      
      
      
      
        <a class="stackoverflow" href="https://stackoverflow.com/users/585675" title="StackOverflow" target='_blank'>StackOverflow</a>
      
      

    </div>  
  </nav>
</hgroup>

<hgroup>
 <p class="site-subtitle" style="font-size:10px;">
  Copyright &copy; 2020 - vishnuatrai.in 
  <br />
  <span class="credit">Powered by <a href="http://octopress.org">Octopress</a></span>
 </p>
 </hgroup>


</div>
</header>
			</div>
		</div>
		<div class="mid-col">
			
				
			
      <div class="mid-col-container">
        <div id="bloag-search" style="display:none;">
          <gcse:search></gcse:search>
        </div>
				<div id="content" class="article-inner"><article class="post" itemscope itemtype="http://schema.org/BlogPosting">
  
	<h1 class="title" itemprop="name">Kubernetes - Secrets vs ConfigMaps</h1>
  








  



  <div class="post-date"><time datetime="2018-08-16T16:28:34+05:30" data-updated="true" itemprop="datePublished">Aug 16<span>th</span>, 2018</time></div>
	<div class="entry-content" itemprop="articleBody"><!--more-->




<table class="kubtable">
    <tr style="font-weight: bold;">
        <th style="width: 16%"></th>
        <th style="width: 42%"> <strong>Secret</strong></th>
        <th style="width: 42%"> <strong>ConfigMap</strong></th>
    </tr>
    <tbody>
        <tr>
        <td><strong>What is?</strong></td>
        <td>Secrets are k8s object to manage small amount of sensitive data like password, keys and tokens with less than 1mb size. Secrets encoded and stored inside k8s master etcd data store. Since Secrets will be created outside of pods and containers, these can be used any number of times</td>
        <td>ConfigMaps used to seperate container images and its custom configurations so that images are portable and can be run in any environment providing appropriate configuration. `ConfigMap` stores data in key, value format. If any configuration values are sensitive the use `Secret` instead `ConfigMap`. Its must to create `ConfigMap` before hand if we need to refer in pod spec</td>
        </tr>
        <tr>
        <td><strong class="feature">Create using `kubectl`</strong></td>
        <td >
            <span class="syntax">   
                #syntax <br/>
                kubectl create secret <type of secret (generic)> <name of secret> < data from-file|from-literal><br/>
                echo -n &#8216;admin&#8217; > ./username.txt<br/>
                echo -n &#8216;1f2d1e2e67df&#8217; > ./password.txt<br/>
                kubectl create secret generic db-user-pass &#8211;from-file=./username.txt &#8211;from-file=./password.txt<br/>
                kubectl create secret generic dev-db-secret &#8211;from-literal=username=user &#8211;from-literal=password=&#8217;S!B\*d$zDsb=&#8217;
            </span>
        </td>
        <td>
            <span  class="syntax">
                #syntax<br/>
                kubectl create configmap <name of configmap> < data from-file|from-literal><br/>
                path/to/config/file/application.yaml<br/>
                path/to/config/file/application-prod.properties<br/>
                kubectl create configmap app-config &#8211;from-file=path/to/config/file/<br/>
                #list the content of properties and yml file configuration<br/>
                kubectl get configmaps app-config -o wide<br/>
                kubectl create configmap custom-config &#8211;from-literal port=8080 &#8211;from-literal https=false
            </span>
        </td>
        </tr>
        <tr>
            <td><strong class="feature">Create using yaml manifesto files</strong></td>
            <td>
                <span  class="syntax">
                <pre>
                    <code>
    #sample yaml manifesto secret.yaml file 
    apiVersion: v1
    kind: Secret
    metadata:
        name: mysecret
    type: Opaque
    data:
        username: appuser
        password: MWYyZDFlMmU2N2Rm
&nbsp;
&nbsp;
create using kubectl apply
    kubectl apply -f ./secret.yaml
                </span>
            </td>
            <td>
            <span  class="syntax">
                <pre>
                <code>
    #sample yaml manifesto configmap.yaml file 
    apiVersion: v1
    kind: ConfigMap
    metadata:
        name: myconfig
    type: Opaque
    data:
        port: 8080
        https: false
&nbsp;
&nbsp;
&nbsp;
create using kubectl apply
    kubectl apply -f ./configmap.yaml
                </code>     
                </pre>      
            </span>
            </td>
        </tr>
        <tr>
            <td>
                <strong class="feature">
                    Deploy within Pods, 
                    Using Volumes
                </strong>
            </td>
            <td>
                <span  class="syntax">
                <pre>
                <code>
                #sample pod manifesto yaml file
                apiVersion: v1
                kind: Pod
                metadata:
                    name: nginx
                spec:
                    containers:
                    - name: nginx
                      image: nginx
                      volumeMounts:
                      - name: secret-volume
                        mountPath: /etc/secret
                        readOnly: true
                    volumes:
                    - name: secret-volume
                      secret:
                        secretName: mysecret    
                </code>     
                </pre>      
                </span>
            </td>
            <td>
                <span  class="syntax">
                <pre>
                <code>
    #sample pod manifesto yaml file
    apiVersion: v1
    kind: Pod
    metadata:
        name: nginx
    spec:
        containers:
        - name: nginx
          image: nginx
          volumeMounts:
          - mountPath: /target/
            name: custom-config
        volumes:
        - name: custom-config
          configMap:
            name: app-config
            items:
            - key: application.yaml  
              path: application.yaml
            - key: application-prod.properties
              path: application-prod.properties
                </code>
                </pre>
                </span>
            </td>
        </tr>
        <tr>
            <td>
                <strong class="feature">
                    Deploy within Pods, 
                    Using environment variables
                </strong>
            </td>
            <td>
                <span class="syntax">
                    <pre><code>
    #sample pod manifesto yaml file
    apiVersion: v1
    kind: Pod
    metadata:
        name: nginx
    spec:
        containers:
        - name: nginx
          image: nginx
          env:
          - name: SECRET_USERNAME
            valueFrom:
                secretKeyRef:
                    name: mysecret
                    key: username
          - name: SECRET_PASSWORD
            valueFrom:
                secretKeyRef:
                    name: mysecret
                    key: password


Instead of volume mapping use environment variables
and use secret(ie. mysecret) to assign values. 
Verify the environment variables.
&nbsp;
    kubectl exec nginx env | grep SECRET
        => SECRET_PASSWORD=MWYyZDFlMmU2N2Rm
        => SECRET_USERNAME=appuser
                    </code></pre>
                </span>
            </td>
            <td>
                <span class="syntax"><pre><code>
    #sample pod manifesto yaml file
    apiVersion: v1
    kind: Pod
    metadata:
        name: nginx
    spec:
        containers:
        - name: nginx
          image: nginx
          env:
          - name: CONFIG_PORT
            valueFrom:
                configMapKeyRef:
                    name: myconfig
                    key: port


Instead of volume mapping use environment variables
and use configmap(ie. myconfig) to assign values.
Verify the environment variables.
&nbsp;
    kubectl exec nginx env | grep CONFIG
        => CONFIG_PORT=8080             
                </code></pre></span>
            </td>
        </tr>
    </tbody>
</table>

</div>

</article>

	<div class="share">
    <div class="share_icon_group addthis_toolbox addthis_default_style addthis_32x32_style">
        
            <a class="share_icon addthis_button_preferred_1"></a>
        
        
            <a class="share_icon addthis_button_preferred_2" fb:like:layout="button_count"></a>
        
        
        <a class="share_icon addthis_button_preferred_4"></a>
    </div>
    <script type="text/javascript" src="http://s7.addthis.com/js/300/addthis_widget.js#pubid="></script>
</div>



<section id="comment">
    <div id="disqus_thread" aria-live="polite"><noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
</div>
</section>
</div>
			</div>
			<footer id="footer" class="inner">
</footer>
			<script src="/javascripts/slash.js"></script>
<script src="/javascripts/jquery.fancybox.pack.js"></script>
<script type="text/javascript">
(function($){
	$('.fancybox').fancybox();
})(jQuery);
</script> <!-- Delete or comment this line to disable Fancybox -->


<script type="text/javascript">
      var disqus_shortname = 'cutthecuttingedge';
      
        

        // var disqus_developer = 1;
        var disqus_identifier = 'http://vishnuatrai.in/blog/2018/08/16/kubernetes-secrets-vs-configmaps/';

        var disqus_url = 'http://vishnuatrai.in/blog/2018/08/16/kubernetes-secrets-vs-configmaps/';
        var disqus_script = 'embed.js';
      
    (function () {
      var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
      dsq.src = 'http://' + disqus_shortname + '.disqus.com/' + disqus_script;
      (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    }());
</script>



	<script type="text/javascript">
		var _gaq = _gaq || [];
		_gaq.push(['_setAccount', 'UA-18733388-1']);
		_gaq.push(['_trackPageview']);

		(function() {
			var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
			ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
			var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
      })();

    
    (function() {
      var cx = '003479435450341944083:wkvxmvwzl1m';
      var gcse = document.createElement('script');
      gcse.type = 'text/javascript';
      gcse.async = true;
      gcse.src = (document.location.protocol == 'https:' ? 'https:' : 'http:') +
        '//www.google.com/cse/cse.js?cx=' + cx;
      var s = document.getElementsByTagName('script')[0];
        s.parentNode.insertBefore(gcse, s);
    })();
    $(document).ready(function(){
      $('#search-blog-lnk').click(function(e){ 
         $('#bloag-search').toggle(); 
         $('#bloag-search').css( {'top':e.pageY-50,'left': (e.pageX), 'position':'absolute', 'border':'1px solid black', 'padding':'0px'} );
      });

      $('#bloag-search').css('z-index','10000');
      $('#content').click(function(){  $('#bloag-search').hide();  });
      $("#bloag-search").on('click', '.gsc-clear-button', 
        function(){ $('#bloag-search').hide();
      });

    });
  </script>




		</div>
	</div>
</body>
</html>
