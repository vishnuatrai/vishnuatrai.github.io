

<!DOCTYPE HTML>
<html>
<head>
	<meta charset="utf-8">
	<title>Kafka - Consumer CommitFailedException for revoked partition - @vishnuatrai</title>
	<meta name="author" content="vishnuatrai.in">

	
	<meta name="description" content="Kafka - Consumer CommitFailedException for revoked partition">
	<meta name="keywords" content="Kafka, Consumer, CommitFailedException, Revoked Partition">

  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">

	<link href="false" rel="alternate" title="@vishnuatrai" type="application/atom+xml">
	
	<link rel="canonical" href="http://vishnuatrai.in/blog/2019/06/10/kafka-consumer-commitfailedexception-for-revoked-partition/">
  <link href="/favicon.gif" rel="shortcut icon" type="image/x-icon" >
  <link rel="icon" href="/favicon.gif" type="image/x-icon">

	<link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
	<link href="/stylesheets/custom.css" media="screen, projection" rel="stylesheet" type="text/css">

	<!--[if lt IE 9]><script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script><![endif]-->
	<script src="//ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
	<link href='http://fonts.googleapis.com/css?family=Open+Sans:400italic,400,700' rel='stylesheet' type='text/css'>
	<!--Fonts from Google"s Web font directory at http://google.com/webfonts -->
<link href="//fonts.googleapis.com/css?family=PT+Serif:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">
<link href="//fonts.googleapis.com/css?family=PT+Sans:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">

</head>


<body>
	<div class="container">
		<div class="left-col">
			<div class="intrude-less">
			<header id="header" class="inner"><nav id="main-nav"><ul class="main-navigation">
  <li><a href="/">Blog</a></li>
  <li><a href="/about">About</a></li>
  <li><a onclick="javascript:void(0);" id="search-blog-lnk" style='cursor:move;'>Search</a></li>
  <li><a href="/blog/archives">Archives</a></li>
</ul>
</nav>
<div class="profile-container">
  <div class="profilepic">
    <script src="/javascripts/md5.js"></script>
    <script type="text/javascript">
$(function(){
  $('.profilepic').append("<img src='http://www.gravatar.com/avatar/" + MD5("vishnu.atrai@gmail.com") + "?s=160' alt='Profile Picture' style='width: 160px;' />");
});
    </script>
  </div>
  <hgroup>
  <h1 class="site-title"><a href="/">@vishnuatrai</a></h1>
  
  <p class="site-subtitle">Java, Spring Boot, Ruby on Rails contributor developer</p>
  
  </hgroup>
  
<hgroup>
  <nav id="sub-nav">
    <div class="social" style="margin-bottom:60px; margin-right:0px;">
        
        

      
        <a class="twitter" href="http://twitter.com/vishnuatrai" title="Twitter">Twitter</a>
      
      
        <a class="github" href="https://github.com/vishnuatrai" title="GitHub">GitHub</a>
      
      
      
        <a class="linkedin" href="http://www.linkedin.com/in/vishnuatrai">LinkedIn</a>
      
      
      
      
      
        <a class="stackoverflow" href="https://stackoverflow.com/users/585675" title="StackOverflow" target='_blank'>StackOverflow</a>
      
      

    </div>  
  </nav>
</hgroup>

<hgroup>
 <p class="site-subtitle" style="font-size:10px;">
  Copyright &copy; 2020 - vishnuatrai.in 
  <br />
  <span class="credit">Powered by <a href="http://octopress.org">Octopress</a></span>
 </p>
 </hgroup>


</div>
</header>
			</div>
		</div>
		<div class="mid-col">
			
				
			
      <div class="mid-col-container">
        <div id="bloag-search" style="display:none;">
          <gcse:search></gcse:search>
        </div>
				<div id="content" class="article-inner"><article class="post" itemscope itemtype="http://schema.org/BlogPosting">
  
	<h1 class="title" itemprop="name">Kafka - Consumer CommitFailedException for Revoked Partition</h1>
  








  



  <div class="post-date"><time datetime="2019-06-10T16:30:34+05:30" data-updated="true" itemprop="datePublished">Jun 10<span>th</span>, 2019</time></div>
	<div class="entry-content" itemprop="articleBody"><h4>Error Trace</h4>

<pre><code>06-10 01:15:05 131 pool-9-thread-5 ERROR [] -
commit failed
org.apache.kafka.clients.consumer.CommitFailedException: Commit cannot be completed since the group has already rebalanced and assigned the partitions to another member. This means that the time between subsequent calls to poll() was longer than the configured max.poll.interval.ms, which typically implies that the poll loop is spending too much time message processing. You can address this either by increasing the session timeout or by reducing the maximum size of batches returned in poll() with max.poll.records.
at org.apache.kafka.clients.consumer.internals.ConsumerCoordinator.sendOffsetCommitRequest(ConsumerCoordinator.java:713) ~[MsgAgent-jar-with-dependencies.jar:na]
at org.apache.kafka.clients.consumer.internals.ConsumerCoordinator.commitOffsetsSync(ConsumerCoordinator.java:596) ~[MsgAgent-jar-with-dependencies.jar:na]
at org.apache.kafka.clients.consumer.KafkaConsumer.commitSync(KafkaConsumer.java:1218) ~[ConsumerService-jar-with-dependencies.jar:na]
at com.vatrai.consumer.service.ConsumerServiceImpl.consume(ConsumerServiceImpl.java:67) ~[ConsumerService-jar-with-dependencies.jar:na]
at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149) [na:1.8.0_161]
at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624) [na:1.8.0_161]
at java.lang.Thread.run(Thread.java:748) [na:1.8.0_161]
</code></pre>

<h4>Reason</h4>

<p>Consumer invoked the polling method to obtain the messages.<!--more--> Client application uses an external loop to continuously invoke the polling method of the consumer. The next poll was performed only after all messages in a batch were processed. <code>max.poll.interval.ms</code> option can be configured to set maximum interval between two polling operations. If client application cannot process polling records and it takes more time than the maximum interval. As a result, the server may remove the client and trigger rebalance.</p>

<h4>Optimize Configuration</h4>

<p><strong><em>max.poll.interval.ms=75000</em></strong></p>

<p>The maximum delay between invocations of poll() when using consumer group management. This places an upper bound on the amount of time that the consumer can be idle before fetching more records. If poll() is not called before expiration of this timeout, then the consumer is considered failed and the group will rebalance in order to reassign the partitions to another member. For consumers using a non-null group.instance.id which reach this timeout, partitions will not be immediately reassigned. Instead, the consumer will stop sending heartbeats and partitions will be reassigned after expiration of session.timeout.ms. This mirrors the behaviour of a static consumer which has shutdown.</p>

<p><strong><em>max.poll.records = 300</em></strong></p>

<p>The maximum number of records returned in a single call to poll(). Number of polling records can be reduced if processing these records taking more time.</p>
</div>

</article>

	<div class="share">
    <div class="share_icon_group addthis_toolbox addthis_default_style addthis_32x32_style">
        
            <a class="share_icon addthis_button_preferred_1"></a>
        
        
            <a class="share_icon addthis_button_preferred_2" fb:like:layout="button_count"></a>
        
        
        <a class="share_icon addthis_button_preferred_4"></a>
    </div>
    <script type="text/javascript" src="http://s7.addthis.com/js/300/addthis_widget.js#pubid="></script>
</div>



<section id="comment">
    <div id="disqus_thread" aria-live="polite"><noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
</div>
</section>
</div>
			</div>
			<footer id="footer" class="inner">
</footer>
			<script src="/javascripts/slash.js"></script>
<script src="/javascripts/jquery.fancybox.pack.js"></script>
<script type="text/javascript">
(function($){
	$('.fancybox').fancybox();
})(jQuery);
</script> <!-- Delete or comment this line to disable Fancybox -->


<script type="text/javascript">
      var disqus_shortname = 'cutthecuttingedge';
      
        

        // var disqus_developer = 1;
        var disqus_identifier = 'http://vishnuatrai.in/blog/2019/06/10/kafka-consumer-commitfailedexception-for-revoked-partition/';

        var disqus_url = 'http://vishnuatrai.in/blog/2019/06/10/kafka-consumer-commitfailedexception-for-revoked-partition/';
        var disqus_script = 'embed.js';
      
    (function () {
      var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
      dsq.src = 'http://' + disqus_shortname + '.disqus.com/' + disqus_script;
      (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    }());
</script>



	<script type="text/javascript">
		var _gaq = _gaq || [];
		_gaq.push(['_setAccount', 'UA-18733388-1']);
		_gaq.push(['_trackPageview']);

		(function() {
			var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
			ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
			var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
      })();

    
    (function() {
      var cx = '003479435450341944083:wkvxmvwzl1m';
      var gcse = document.createElement('script');
      gcse.type = 'text/javascript';
      gcse.async = true;
      gcse.src = (document.location.protocol == 'https:' ? 'https:' : 'http:') +
        '//www.google.com/cse/cse.js?cx=' + cx;
      var s = document.getElementsByTagName('script')[0];
        s.parentNode.insertBefore(gcse, s);
    })();
    $(document).ready(function(){
      $('#search-blog-lnk').click(function(e){ 
         $('#bloag-search').toggle(); 
         $('#bloag-search').css( {'top':e.pageY-50,'left': (e.pageX), 'position':'absolute', 'border':'1px solid black', 'padding':'0px'} );
      });

      $('#bloag-search').css('z-index','10000');
      $('#content').click(function(){  $('#bloag-search').hide();  });
      $("#bloag-search").on('click', '.gsc-clear-button', 
        function(){ $('#bloag-search').hide();
      });

    });
  </script>




		</div>
	</div>
</body>
</html>
